---
layout: layouts/base.njk
title: Home
pagination:
  data: collections.posts
  size: 5
  alias: posts
permalink: "/{% if pagination.pageNumber > 0 %}page/{{ pagination.pageNumber + 1 }}/{% endif %}"
---

<section class="hero">
  <h1>{{ site.title }}</h1>
  <p class="tagline">{{ site.tagline }}</p>
  <div class="hero-actions">
    <a class="btn btn-primary" href="#posts">Read Latest</a>
    <a class="btn" href="{{ env.base }}/tags/">Browse Tags</a>
  </div>
</section>

<h2 id="posts">Latest Posts</h2>

{% if posts and posts | length > 0 %}
  {# pick a featured post if marked, else first #}
  {% set featured = false %}
  {% for p in posts %}
    {% if (not featured) and ((p.data.featured == true) or (p.data.tags and ('featured' in p.data.tags))) %}
      {% set featured = p %}
    {% endif %}
  {% endfor %}
  {% if not featured %}{% set featured = posts[0] %}{% endif %}
  <article class="featured">
    {% if featured.data.cover %}
      <a class="cover" href="{{ env.base }}{{ featured.url }}">
        <img src="{{ featured.data.cover }}" alt="" loading="lazy" />
      </a>
    {% endif %}
    <div class="content">
      <h2><a href="{{ env.base }}{{ featured.url }}">{{ featured.data.title }}</a></h2>
      <p class="meta">
        <time datetime="{{ featured.date | htmlDateString }}">{{ featured.date | date }}</time>
        · {{ featured.templateContent | readTime }}
      </p>
      <p>{{ featured.templateContent | excerpt(36) }}</p>
      <a class="btn" href="{{ env.base }}{{ featured.url }}">Read more</a>
    </div>
  </article>
{% endif %}

<div class="post-list">
  {% for p in posts %}
    {% if not (p.url == featured.url) %}
    <article class="post-row">
      <div class="info">
        <h3><a href="{{ env.base }}{{ p.url }}">{{ p.data.title }}</a></h3>
        <p class="meta"><time datetime="{{ p.date | htmlDateString }}">{{ p.date | date }}</time> · {{ p.templateContent | readTime }}</p>
        <p class="excerpt">{{ p.templateContent | excerpt(30) }}</p>
      </div>
      <div class="more">
        <a class="btn" href="{{ env.base }}{{ p.url }}">Read</a>
      </div>
    </article>
    {% endif %}
  {% endfor %}
</div>

<nav class="pager">
  {% if pagination.href.previous %}
    <a class="prev" href="{{ env.base }}{{ pagination.href.previous }}">← Newer</a>
  {% endif %}
  {% if pagination.href.next %}
    <a class="next" href="{{ env.base }}{{ pagination.href.next }}">Older →</a>
  {% endif %}
</nav>
