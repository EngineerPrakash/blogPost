---
layout: layouts/base.njk
---

{% include "../components/breadcrumbs.njk" %}
<article class="post">
  {% if cover %}
    <div class="post-cover">
      <img src="{{ cover }}" alt="" loading="lazy" />
    </div>
  {% endif %}
  <header class="post-header">
    <h1>{{ title }}</h1>
    <p class="meta">
      <time datetime="{{ date | htmlDateString }}">{{ date | date }}</time>
      · {{ content | readTime }}
      {% if tags %}
        ·
        {% for tag in tags %}
          <a class="chip" href="{{ env.base }}/tag/{{ tag | url }}">{{ tag }}</a>
        {% endfor %}
      {% endif %}
    </p>
  </header>
  <div class="content prose">
    {{ content | safe }}
  </div>

  <section class="post-share">
    {% set abs = site.url + env.base + page.url %}
    {% set text = (title or site.title) %}
    <span>Share:</span>
    <a class="btn" href="https://twitter.com/intent/tweet?url={{ abs | urlencode }}&text={{ text | urlencode }}" rel="noopener" target="_blank">Twitter</a>
    <a class="btn" href="https://www.linkedin.com/shareArticle?mini=true&url={{ abs | urlencode }}&title={{ text | urlencode }}" rel="noopener" target="_blank">LinkedIn</a>
  </section>

  {% set shown = 0 %}
  <section class="related">
    <h2>Related Posts</h2>
    <div class="posts grid">
    {% for p in collections.posts %}
      {% if p.url != page.url and p.data.tags and tags %}
        {% set overlap = false %}
        {% for t in p.data.tags %}
          {% if t in tags %}{% set overlap = true %}{% endif %}
        {% endfor %}
        {% if overlap and shown < 3 %}
          {% set post = p %}
          {% include "../components/post_card.njk" %}
          {% set shown = shown + 1 %}
        {% endif %}
      {% endif %}
    {% endfor %}
    {% if shown == 0 %}<p class="meta">No related posts yet.</p>{% endif %}
    </div>
  </section>

  {% include "../components/author.njk" %}

  {# Optional comments via Giscus #}
  {% if site.comments and site.comments.provider == 'giscus' and site.comments.giscus and site.comments.giscus.repo and site.comments.giscus.repoId and site.comments.giscus.category and site.comments.giscus.categoryId %}
  <section class="comments">
    <script src="https://giscus.app/client.js"
            data-repo="{{ site.comments.giscus.repo }}"
            data-repo-id="{{ site.comments.giscus.repoId }}"
            data-category="{{ site.comments.giscus.category }}"
            data-category-id="{{ site.comments.giscus.categoryId }}"
            data-mapping="{{ site.comments.giscus.mapping or 'pathname' }}"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="bottom"
            data-theme="{{ site.comments.giscus.theme or 'preferred_color_scheme' }}"
            data-lang="en"
            crossorigin="anonymous"
            async>
    </script>
  </section>
  {% endif %}
</article>
